!function(){"use strict";var e=window.wp.blocks;function t(e){var n,o,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(n=0;n<i;n++)e[n]&&(o=t(e[n]))&&(r&&(r+=" "),r+=o)}else for(o in e)e[o]&&(r&&(r+=" "),r+=o);return r}var n=function(){for(var e,n,o=0,r="",i=arguments.length;o<i;o++)(e=arguments[o])&&(n=t(e))&&(r&&(r+=" "),r+=n);return r},o=window.wp.i18n,r=window.wp.components,i=window.wp.blockEditor,l=window.wp.a11y,s=window.wp.data,a=window.wp.keycodes,c=window.wp.url,d=window.wp.element,u=window.wp.primitives,g=window.ReactJSXRuntime,p=(0,g.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,g.jsx)(u.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})}),h=(0,g.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,g.jsx)(u.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"m13.955 20.748 8-17.5-.91-.416L19.597 6H13.5v1.5h5.411l-1.6 3.5H13.5v1.5h3.126l-1.6 3.5H13.5l.028 1.5h.812l-1.295 2.832.91.416ZM17.675 16l-.686 1.5h4.539L21.5 16h-3.825Zm2.286-5-.686 1.5H21.5V11h-1.54ZM2 12c0 3.58 2.42 5.5 6 5.5h.5V19l3-2.5-3-2.5v2H8c-2.48 0-4.5-1.52-4.5-4S5.52 7.5 8 7.5h3.5V6H8c-3.58 0-6 2.42-6 6Z"})}),m=window.wp.compose;const x=()=>(0,g.jsx)("span",{class:"gwx-menu-item__glyph",role:"presentation"});var k=window.wp.dom,w=window.wp.coreData,v=window.wp.htmlEntities,_=(0,g.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,g.jsx)(u.Path,{d:"M10.8622 8.04053L14.2805 12.0286L10.8622 16.0167L9.72327 15.0405L12.3049 12.0286L9.72327 9.01672L10.8622 8.04053Z"})}),b=(0,g.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,g.jsx)(u.Path,{d:"m13.1 16-3.4-4 3.4-4 1.1 1-2.6 3 2.6 3-1.1 1z"})}),f=(0,g.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,g.jsx)(u.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),y=(0,g.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,g.jsx)(u.Path,{d:"M19 8h-1V6h-5v2h-2V6H6v2H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zm.5 10c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5v-8c0-.3.2-.5.5-.5h14c.3 0 .5.2.5.5v8z"})});const B={name:"groundworx/navigation-link"},C=["groundworx/navigation-link","groundworx/navigation-submenu","groundworx/navigation-spacer","core/page-list"];function j({icon:e,showColors:t=!1,className:o,context:i}){"block-default"===e?.src&&(e={src:y});const l=(0,g.jsx)(r.Icon,{icon:e&&e.src?e.src:e,context:i}),s=t?{backgroundColor:e&&e.background,color:e&&e.foreground}:{};return(0,g.jsx)("span",{style:s,className:n("block-editor-block-icon",o,{"has-colors":t}),children:l})}function S({rootClientId:t}){const{insertBlocks:o}=(0,s.useDispatch)(i.store),l=(0,s.useSelect)((()=>(0,e.getBlockTypes)().filter((e=>C.includes(e.name)))),[]),a=(0,s.useSelect)((e=>e(i.store).getBlockOrder(t)?.length||0),[t]);return(0,g.jsx)("div",{className:"block-editor-inserter__panel-content custom-quick-inserter",children:(0,g.jsx)(r.Flex,{role:"listbox",direction:"row",gap:0,wrap:!0,"aria-orientation":"horizontal",class:"block-editor-block-types-list","aria-label":"Blocks",children:l.map((i=>(0,g.jsx)("div",{class:"block-editor-block-types-list__list-item",draggable:"false",children:(0,g.jsxs)(r.Button,{onClick:()=>{const n=(0,e.createBlock)(i.name);o([n],a,t)},className:n("block-editor-block-types-list__item"),children:[(0,g.jsx)("span",{className:"block-editor-block-types-list__item-icon",children:(0,g.jsx)(j,{icon:i.icon,showColors:!0})}),(0,g.jsx)("span",{className:"block-editor-block-types-list__item-title",children:(0,g.jsx)(r.__experimentalTruncate,{numberOfLines:3,children:i.title})})]},i.name)})))})})}function I(e,t){switch(e){case"post":case"page":return{type:"post",subtype:e};case"category":return{type:"term",subtype:"category"};case"tag":return{type:"term",subtype:"post_tag"};case"post_format":return{type:"post-format"};default:return"taxonomy"===t?{type:"term",subtype:e}:"post-type"===t?{type:"post",subtype:e}:{initialSuggestionsSearchOptions:{type:"post",subtype:"page",perPage:20}}}}function T({clientId:e,onBack:t}){const{rootBlockClientId:n}=(0,s.useSelect)((t=>{const{getBlockRootClientId:n}=t(i.store);return{rootBlockClientId:n(e)}}),[e]),l=(0,m.useFocusOnMount)("firstElement"),a=(0,m.useInstanceId)(i.LinkControl,"link-ui-block-inserter__title"),c=(0,m.useInstanceId)(i.LinkControl,"link-ui-block-inserter__description");if(!e)return null;const{insertBlocks:d}=(0,s.useDispatch)(i.store);return(0,g.jsxs)("div",{className:"link-ui-block-inserter",role:"dialog","aria-labelledby":a,"aria-describedby":c,ref:l,children:[(0,g.jsxs)(r.VisuallyHidden,{children:[(0,g.jsx)("h2",{id:a,children:(0,o.__)("Add block","groundworx-navigation")}),(0,g.jsx)("p",{id:c,children:(0,o.__)("Choose a block to add to your Navigation.","groundworx-navigation")})]}),(0,g.jsx)(r.Button,{className:"link-ui-block-inserter__back",icon:(0,o.isRTL)()?_:b,onClick:e=>{e.preventDefault(),t()},size:"small",children:(0,o.__)("Back","groundworx-navigation")}),(0,g.jsx)(S,{clientId:e,rootClientId:n,onSelect:(e,t)=>{d([e],t,n)}})]})}Object.fromEntries([{name:"accordion",label:"Accordion",type:"accordion",direction:"vertical"},{name:"list",label:"List",type:"list",direction:"vertical"},{name:"vertical-menu",label:"Vertical Menu",type:"menu",direction:"vertical"},{name:"stacked-menu",label:"Stacked Menu",type:"menu",direction:"vertical"},{name:"horizontal-menu",label:"Horizontal Menu",type:"menu",direction:"horizontal"}].map((({name:e,direction:t})=>[e,{layout:{type:"flex",orientation:t}}])));const V=(0,d.forwardRef)((function(e,t){const{label:n,url:l,opensInNewTab:a,type:c,kind:u}=e.link,p=c||"page",[h,x]=(0,d.useState)(!1),[_,b]=(0,d.useState)(!1),{saveEntityRecord:f}=(0,s.useDispatch)(w.store),y=(0,w.useResourcePermissions)({kind:"postType",name:p}),B=(0,d.useMemo)((()=>({url:l,opensInNewTab:a,title:n&&(0,k.__unstableStripHTML)(n)})),[n,a,l]),C=(0,m.useInstanceId)(V,"link-ui-link-control__title"),j=(0,m.useInstanceId)(V,"link-ui-link-control__description");return(0,g.jsxs)(r.Popover,{ref:t,placement:"bottom",onClose:e.onClose,anchor:e.anchor,shift:!0,children:[!h&&(0,g.jsxs)("div",{role:"dialog","aria-labelledby":C,"aria-describedby":j,children:[(0,g.jsxs)(r.VisuallyHidden,{children:[(0,g.jsx)("h2",{id:C,children:(0,o.__)("Add link","groundworx-navigation")}),(0,g.jsx)("p",{id:j,children:(0,o.__)("Search for and add a link to your Navigation.","groundworx-navigation")})]}),(0,g.jsx)(i.LinkControl,{hasTextControl:!0,hasRichPreviews:!0,value:B,showInitialSuggestions:!0,withCreateSuggestion:y.canCreate,createSuggestion:async function(e){const t=await f("postType",p,{title:e,status:"draft"});return{id:t.id,type:p,title:(0,v.decodeEntities)(t.title.rendered),url:t.link,kind:"post-type"}},createSuggestionButtonText:e=>{let t;
/* translators: %s: search term. */
return t="post"===c?(0,o.__)("Create draft post: <mark>%s</mark>","groundworx-navigation"):(0,o.__)("Create draft page: <mark>%s</mark>","groundworx-navigation"),(0,d.createInterpolateElement)((0,o.sprintf)(t,e),{mark:(0,g.jsx)("mark",{})})},noDirectEntry:!!c,noURLSuggestion:!!c,suggestionsQuery:I(c,u),onChange:e.onChange,onRemove:e.onRemove,onCancel:e.onCancel,renderControlBottom:()=>!B?.url?.length&&(0,g.jsx)(H,{focusAddBlockButton:_,setAddingBlock:()=>{x(!0),b(!1)}})})]}),h&&(0,g.jsx)(T,{clientId:e.clientId,onBack:()=>{x(!1),b(!0)}})]})})),H=({setAddingBlock:e,focusAddBlockButton:t})=>{const n=(0,d.useRef)();return(0,d.useEffect)((()=>{t&&n.current?.focus()}),[t]),(0,g.jsx)(r.__experimentalVStack,{className:"link-ui-tools",children:(0,g.jsx)(r.Button,{__next40pxDefaultSize:!0,ref:n,icon:f,onClick:t=>{t.preventDefault(),e(!0)},"aria-haspopup":"listbox",children:(0,o.__)("Add block","groundworx-navigation")})})};var L=window.wp.escapeHtml,N=JSON.parse('{"UU":"groundworx/navigation-submenu"}'),M={to:[{type:"block",blocks:["groundworx/navigation-link"],isMatch:(e,t)=>0===t?.innerBlocks?.length,transform:t=>(0,e.createBlock)("groundworx/navigation-link",t)},{type:"block",blocks:["core/spacer"],isMatch:(e,t)=>0===t?.innerBlocks?.length,transform:()=>(0,e.createBlock)("core/spacer")},{type:"block",blocks:["core/site-logo"],isMatch:(e,t)=>0===t?.innerBlocks?.length,transform:()=>(0,e.createBlock)("core/site-logo")},{type:"block",blocks:["core/home-link"],isMatch:(e,t)=>0===t?.innerBlocks?.length,transform:()=>(0,e.createBlock)("core/home-link")},{type:"block",blocks:["core/social-links"],isMatch:(e,t)=>0===t?.innerBlocks?.length,transform:()=>(0,e.createBlock)("core/social-links")},{type:"block",blocks:["core/search"],isMatch:(e,t)=>0===t?.innerBlocks?.length,transform:()=>(0,e.createBlock)("core/search")}]},R=(0,g.jsxs)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,g.jsx)(u.Path,{d:"M15.5 7.5h-7V9h7V7.5Zm-7 3.5h7v1.5h-7V11Zm7 3.5h-7V16h7v-1.5Z"}),(0,g.jsx)(u.Path,{d:"M17 4H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2ZM7 5.5h10a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5Z"})]}),D=(0,g.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,g.jsx)(u.Path,{d:"M2 12c0 3.6 2.4 5.5 6 5.5h.5V19l3-2.5-3-2.5v2H8c-2.5 0-4.5-1.5-4.5-4s2-4.5 4.5-4.5h3.5V6H8c-3.6 0-6 2.4-6 6zm19.5-1h-8v1.5h8V11zm0 5h-8v1.5h8V16zm0-10h-8v1.5h8V6z"})});(0,e.registerBlockType)(N.UU,{icon:({context:e})=>"list-view"===e?R:D,__experimentalLabel(e,{context:t}){const{label:n}=e,o=e?.metadata?.name;return"list-view"===t&&(o||n)&&e?.metadata?.name||n},edit:function({attributes:t,isSelected:u,setAttributes:k,mergeBlocks:w,onReplace:v,context:_,clientId:b}){const{label:f,url:y,description:j,rel:S}=t,{showSubmenuIcon:I,maxNestingLevel:T}=_,{__unstableMarkNextChangeAsNotPersistent:H,replaceBlock:N,selectBlock:M}=(0,s.useDispatch)(i.store),[R,D]=(0,d.useState)(!1),[P,E]=(0,d.useState)(null),[A,z]=(0,d.useState)(null),Z=(0,d.useRef)(null),O=(e=>{const[t,n]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{const{ownerDocument:t}=e.current;function o(e){i(e)}function r(){n(!1)}function i(t){e.current.contains(t.target)?n(!0):n(!1)}return t.addEventListener("dragstart",o),t.addEventListener("dragend",r),t.addEventListener("dragenter",i),()=>{t.removeEventListener("dragstart",o),t.removeEventListener("dragend",r),t.removeEventListener("dragenter",i)}}),[]),t})(Z),U=(0,o.__)("Add text…","groundworx-navigation"),G=(0,d.useRef)(),{parentCount:F,isParentOfSelectedBlock:J,isImmediateParentOfSelectedBlock:K,hasChildren:q,selectedBlockHasChildren:Q,onlyDescendantIsEmptyLink:X}=(0,s.useSelect)((e=>{const{hasSelectedInnerBlock:t,getSelectedBlockClientId:n,getBlockParentsByBlockName:o,getBlock:r,getBlockCount:l,getBlockOrder:s}=e(i.store);let a;const c=s(n());if(1===c?.length){const e=r(c[0]);a="groundworx/navigation-link"===e?.name&&!e?.attributes?.label}return{parentCount:o(b,"groundworx/navigation-submenu").length,isParentOfSelectedBlock:t(b,!0),isImmediateParentOfSelectedBlock:t(b,!1),hasChildren:!!l(b),selectedBlockHasChildren:!!c?.length,onlyDescendantIsEmptyLink:a}}),[b]),W=(0,m.usePrevious)(q);(0,d.useEffect)((()=>{y||D(!0)}),[]),(0,d.useEffect)((()=>{u||D(!1)}),[u]),(0,d.useEffect)((()=>{R&&y&&(0,c.isURL)((0,c.prependHTTP)(f))&&/^.+\.[a-z]+/.test(f)&&function(){G.current.focus();const{ownerDocument:e}=G.current,{defaultView:t}=e,n=t.getSelection(),o=e.createRange();o.selectNodeContents(G.current),n.removeAllRanges(),n.addRange(o)}()}),[y]);const Y=(0,i.useBlockProps)({ref:(0,m.useMergeRefs)([z,Z]),className:n("gwx-menu-item","open-on-click",{"is-editing":u||J,"is-dragging-within":O,"has-link":!!y,"has-child":q}),onKeyDown:function(e){a.isKeyboardEvent.primary(e,"k")&&(e.preventDefault(),e.stopPropagation(),D(!0),E(G.current))}}),$=function(e){const{textColor:t,customTextColor:n,backgroundColor:o,customBackgroundColor:r,style:i}=e,l={};return n?l.customTextColor=n:t?l.textColor=t:i?.color?.text&&(l.customTextColor=i.color.text),r?l.customBackgroundColor=r:o?l.backgroundColor=o:i?.color?.background&&(l.customTextColor=i.color.background),l}(_),ee=F>=T?C.filter((e=>"groundworx/navigation-submenu"!==e)):C,te=function(e){return{className:n("gwx-menu-item__container",{"has-text-color":!(!e.textColor&&!e.customTextColor),"has-background":!(!e.backgroundColor&&!e.customBackgroundColor)})}}($),ne=(0,i.useInnerBlocksProps)(te,{allowedBlocks:ee,defaultBlock:B,directInsert:!0,__experimentalCaptureToolbars:!0,renderAppender:!!(u||K&&!Q)&&i.InnerBlocks.ButtonBlockAppender});function oe(){const n=(0,e.createBlock)("groundworx/navigation-link",t);N(b,n)}(0,d.useEffect)((()=>{!q&&W&&(H(),oe())}),[q,W]);const re=!Q||X;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.BlockControls,{children:(0,g.jsxs)(r.ToolbarGroup,{children:[(0,g.jsx)(r.ToolbarButton,{name:"link",icon:p,title:(0,o.__)("Link","groundworx-navigation"),shortcut:a.displayShortcut.primary("k"),onClick:e=>{D(!0),E(e.currentTarget)}}),(0,g.jsx)(r.ToolbarButton,{name:"revert",icon:h,title:(0,o.__)("Convert to Link","groundworx-navigation"),onClick:oe,className:"gwx-menu__submenu__revert",disabled:!re})]})}),(0,g.jsx)(i.InspectorControls,{children:(0,g.jsxs)(r.__experimentalToolsPanel,{label:(0,o.__)("Settings","groundworx-navigation"),resetAll:()=>{k({label:"",url:"",description:"",rel:""})},children:[(0,g.jsx)(r.__experimentalToolsPanelItem,{label:(0,o.__)("Text","groundworx-navigation"),isShownByDefault:!0,hasValue:()=>!!f,onDeselect:()=>k({label:""}),children:(0,g.jsx)(r.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:f||"",onChange:e=>{k({label:e})},label:(0,o.__)("Text","groundworx-navigation"),autoComplete:"off"})}),(0,g.jsx)(r.__experimentalToolsPanelItem,{label:(0,o.__)("Link","groundworx-navigation"),isShownByDefault:!0,hasValue:()=>!!y,onDeselect:()=>k({url:""}),children:(0,g.jsx)(r.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:y||"",onChange:e=>{k({url:e})},label:(0,o.__)("Link","groundworx-navigation"),autoComplete:"off",type:"url"})}),(0,g.jsx)(r.__experimentalToolsPanelItem,{label:(0,o.__)("Description","groundworx-navigation"),isShownByDefault:!0,hasValue:()=>!!j,onDeselect:()=>k({description:""}),children:(0,g.jsx)(r.TextareaControl,{__nextHasNoMarginBottom:!0,value:j||"",onChange:e=>{k({description:e})},label:(0,o.__)("Description","groundworx-navigation"),help:(0,o.__)("The description will be displayed in the menu if the current theme supports it.","groundworx-navigation")})}),(0,g.jsx)(r.__experimentalToolsPanelItem,{label:(0,o.__)("Rel attribute","groundworx-navigation"),isShownByDefault:!0,hasValue:()=>!!S,onDeselect:()=>k({rel:""}),children:(0,g.jsx)(r.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:S||"",onChange:e=>{k({rel:e})},label:(0,o.__)("Rel attribute","groundworx-navigation"),autoComplete:"off",help:(0,o.__)("The relationship of the linked URL as space-separated link types.","groundworx-navigation")})})]})}),(0,g.jsxs)("div",{...Y,children:[(0,g.jsxs)("div",{className:"gwx-menu-item__content",children:[(0,g.jsx)(i.RichText,{ref:G,tagName:"a",identifier:"label",className:"gwx-menu-item__label",value:f,onChange:e=>k({label:e}),onMerge:w,onReplace:v,"aria-label":(0,o.__)("Navigation link text","groundworx-navigation"),placeholder:U,withoutInteractiveFormatting:!0,onClick:()=>{y||(D(!0),E(G.current))}}),I&&(0,g.jsx)("span",{className:"gwx-menu-item__icon",children:(0,g.jsx)(x,{})}),j&&(0,g.jsx)("span",{className:"gwx-menu-item__description",children:j}),R&&(0,g.jsx)(V,{clientId:b,link:t,onClose:()=>{D(!1),P?(P.focus(),E(null)):M(b)},anchor:A,onRemove:()=>{k({url:""}),(0,l.speak)((0,o.__)("Link removed."),"assertive")},onChange:e=>{((e={},t,n={})=>{const{label:o="",kind:r="",type:i=""}=n,{title:l="",url:s="",opensInNewTab:a,id:d,kind:u=r,type:g=i}=e,p=l.replace(/http(s?):\/\//gi,""),h=s.replace(/http(s?):\/\//gi,""),m=l&&l!==o&&p!==h?(0,L.escapeHTML)(l):o||(0,L.escapeHTML)(h),x="post_tag"===g?"tag":g.replace("-","_"),k=["post","page","tag","category"].indexOf(x)>-1,w=!u&&!k||"custom"===u?"custom":u;t({...s&&{url:encodeURI((0,c.safeDecodeURI)(s))},...m&&{label:m},...void 0!==a&&{opensInNewTab:a},...d&&Number.isInteger(d)&&{id:d},...w&&{kind:w},...x&&"URL"!==x&&{type:x}})})(e,k,t)}})]}),(0,g.jsx)("div",{className:"gwx-menu-item__subcontent",children:(0,g.jsx)("div",{...ne})})]})]})},save:function(){return(0,g.jsx)(i.InnerBlocks.Content,{})},transforms:M})}();
!function(){"use strict";var e=window.wp.blocks;function t(e){var n,o,l="";if("string"==typeof e||"number"==typeof e)l+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(n=0;n<r;n++)e[n]&&(o=t(e[n]))&&(l&&(l+=" "),l+=o)}else for(o in e)e[o]&&(l&&(l+=" "),l+=o);return l}var n=function(){for(var e,n,o=0,l="",r=arguments.length;o<r;o++)(e=arguments[o])&&(n=t(e))&&(l&&(l+=" "),l+=n);return l},o=window.wp.i18n,l=window.wp.components,r=window.wp.blockEditor,s=window.wp.a11y,i=window.wp.data,a=window.wp.keycodes,c=window.wp.url,d=window.wp.element,u=window.wp.primitives,p=window.ReactJSXRuntime,h=(0,p.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(u.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})}),m=(0,p.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(u.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"m13.955 20.748 8-17.5-.91-.416L19.597 6H13.5v1.5h5.411l-1.6 3.5H13.5v1.5h3.126l-1.6 3.5H13.5l.028 1.5h.812l-1.295 2.832.91.416ZM17.675 16l-.686 1.5h4.539L21.5 16h-3.825Zm2.286-5-.686 1.5H21.5V11h-1.54ZM2 12c0 3.58 2.42 5.5 6 5.5h.5V19l3-2.5-3-2.5v2H8c-2.48 0-4.5-1.52-4.5-4S5.52 7.5 8 7.5h3.5V6H8c-3.58 0-6 2.42-6 6Z"})}),k=window.wp.compose;const g=()=>(0,p.jsx)("span",{class:"gwx-menu-item__glyph",role:"presentation"});var x=window.wp.dom,w=window.wp.coreData,_=window.wp.htmlEntities,b=(0,p.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(u.Path,{d:"M10.8622 8.04053L14.2805 12.0286L10.8622 16.0167L9.72327 15.0405L12.3049 12.0286L9.72327 9.01672L10.8622 8.04053Z"})}),f=(0,p.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(u.Path,{d:"m13.1 16-3.4-4 3.4-4 1.1 1-2.6 3 2.6 3-1.1 1z"})}),v=(0,p.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(u.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),y=(0,p.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(u.Path,{d:"M19 8h-1V6h-5v2h-2V6H6v2H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zm.5 10c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5v-8c0-.3.2-.5.5-.5h14c.3 0 .5.2.5.5v8z"})});const B={name:"groundworx/navigation-link"},C=["groundworx/navigation-link","groundworx/navigation-submenu","groundworx/navigation-spacer","core/page-list"];function j({icon:e,showColors:t=!1,className:o,context:r}){"block-default"===e?.src&&(e={src:y});const s=(0,p.jsx)(l.Icon,{icon:e&&e.src?e.src:e,context:r}),i=t?{backgroundColor:e&&e.background,color:e&&e.foreground}:{};return(0,p.jsx)("span",{style:i,className:n("block-editor-block-icon",o,{"has-colors":t}),children:s})}function S({rootClientId:t}){const{insertBlocks:o}=(0,i.useDispatch)(r.store),s=(0,i.useSelect)((()=>(0,e.getBlockTypes)().filter((e=>C.includes(e.name)))),[]),a=(0,i.useSelect)((e=>e(r.store).getBlockOrder(t)?.length||0),[t]);return(0,p.jsx)("div",{className:"block-editor-inserter__panel-content custom-quick-inserter",children:(0,p.jsx)(l.Flex,{role:"listbox",direction:"row",gap:0,wrap:!0,"aria-orientation":"horizontal",class:"block-editor-block-types-list","aria-label":"Blocks",children:s.map((r=>(0,p.jsx)("div",{class:"block-editor-block-types-list__list-item",draggable:"false",children:(0,p.jsxs)(l.Button,{onClick:()=>{const n=(0,e.createBlock)(r.name);o([n],a,t)},className:n("block-editor-block-types-list__item"),children:[(0,p.jsx)("span",{className:"block-editor-block-types-list__item-icon",children:(0,p.jsx)(j,{icon:r.icon,showColors:!0})}),(0,p.jsx)("span",{className:"block-editor-block-types-list__item-title",children:(0,p.jsx)(l.__experimentalTruncate,{numberOfLines:3,children:r.title})})]},r.name)})))})})}function I(e,t){switch(e){case"post":case"page":return{type:"post",subtype:e};case"category":return{type:"term",subtype:"category"};case"tag":return{type:"term",subtype:"post_tag"};case"post_format":return{type:"post-format"};default:return"taxonomy"===t?{type:"term",subtype:e}:"post-type"===t?{type:"post",subtype:e}:{initialSuggestionsSearchOptions:{type:"post",subtype:"page",perPage:20}}}}function T({clientId:e,onBack:t}){const{rootBlockClientId:n}=(0,i.useSelect)((t=>{const{getBlockRootClientId:n}=t(r.store);return{rootBlockClientId:n(e)}}),[e]),s=(0,k.useFocusOnMount)("firstElement"),a=(0,k.useInstanceId)(r.LinkControl,"link-ui-block-inserter__title"),c=(0,k.useInstanceId)(r.LinkControl,"link-ui-block-inserter__description");if(!e)return null;const{insertBlocks:d}=(0,i.useDispatch)(r.store);return(0,p.jsxs)("div",{className:"link-ui-block-inserter",role:"dialog","aria-labelledby":a,"aria-describedby":c,ref:s,children:[(0,p.jsxs)(l.VisuallyHidden,{children:[(0,p.jsx)("h2",{id:a,children:(0,o.__)("Add block")}),(0,p.jsx)("p",{id:c,children:(0,o.__)("Choose a block to add to your Navigation.")})]}),(0,p.jsx)(l.Button,{className:"link-ui-block-inserter__back",icon:(0,o.isRTL)()?b:f,onClick:e=>{e.preventDefault(),t()},size:"small",children:(0,o.__)("Back")}),(0,p.jsx)(S,{clientId:e,rootClientId:n,onSelect:(e,t)=>{d([e],t,n)}})]})}Object.fromEntries([{name:"accordion",label:"Accordion",type:"accordion",direction:"vertical"},{name:"list",label:"List",type:"list",direction:"vertical"},{name:"vertical-menu",label:"Vertical Menu",type:"menu",direction:"vertical"},{name:"stacked-menu",label:"Stacked Menu",type:"menu",direction:"vertical"},{name:"horizontal-menu",label:"Horizontal Menu",type:"menu",direction:"horizontal"}].map((({name:e,direction:t})=>[e,{layout:{type:"flex",orientation:t}}])));const V=(0,d.forwardRef)((function(e,t){const{label:n,url:s,opensInNewTab:a,type:c,kind:u}=e.link,h=c||"page",[m,g]=(0,d.useState)(!1),[b,f]=(0,d.useState)(!1),{saveEntityRecord:v}=(0,i.useDispatch)(w.store),y=(0,w.useResourcePermissions)({kind:"postType",name:h}),B=(0,d.useMemo)((()=>({url:s,opensInNewTab:a,title:n&&(0,x.__unstableStripHTML)(n)})),[n,a,s]),C=(0,k.useInstanceId)(V,"link-ui-link-control__title"),j=(0,k.useInstanceId)(V,"link-ui-link-control__description");return(0,p.jsxs)(l.Popover,{ref:t,placement:"bottom",onClose:e.onClose,anchor:e.anchor,shift:!0,children:[!m&&(0,p.jsxs)("div",{role:"dialog","aria-labelledby":C,"aria-describedby":j,children:[(0,p.jsxs)(l.VisuallyHidden,{children:[(0,p.jsx)("h2",{id:C,children:(0,o.__)("Add link")}),(0,p.jsx)("p",{id:j,children:(0,o.__)("Search for and add a link to your Navigation.")})]}),(0,p.jsx)(r.LinkControl,{hasTextControl:!0,hasRichPreviews:!0,value:B,showInitialSuggestions:!0,withCreateSuggestion:y.canCreate,createSuggestion:async function(e){const t=await v("postType",h,{title:e,status:"draft"});return{id:t.id,type:h,title:(0,_.decodeEntities)(t.title.rendered),url:t.link,kind:"post-type"}},createSuggestionButtonText:e=>{let t;
/* translators: %s: search term. */
return t="post"===c?(0,o.__)("Create draft post: <mark>%s</mark>"):(0,o.__)("Create draft page: <mark>%s</mark>"),(0,d.createInterpolateElement)((0,o.sprintf)(t,e),{mark:(0,p.jsx)("mark",{})})},noDirectEntry:!!c,noURLSuggestion:!!c,suggestionsQuery:I(c,u),onChange:e.onChange,onRemove:e.onRemove,onCancel:e.onCancel,renderControlBottom:()=>!B?.url?.length&&(0,p.jsx)(H,{focusAddBlockButton:b,setAddingBlock:()=>{g(!0),f(!1)}})})]}),m&&(0,p.jsx)(T,{clientId:e.clientId,onBack:()=>{g(!1),f(!0)}})]})})),H=({setAddingBlock:e,focusAddBlockButton:t})=>{const n=(0,d.useRef)();return(0,d.useEffect)((()=>{t&&n.current?.focus()}),[t]),(0,p.jsx)(l.__experimentalVStack,{className:"link-ui-tools",children:(0,p.jsx)(l.Button,{__next40pxDefaultSize:!0,ref:n,icon:v,onClick:t=>{t.preventDefault(),e(!0)},"aria-haspopup":"listbox",children:(0,o.__)("Add block")})})};var L=window.wp.escapeHtml,N=JSON.parse('{"UU":"groundworx/navigation-submenu"}'),M={to:[{type:"block",blocks:["groundworx/navigation-link"],isMatch:(e,t)=>0===t?.innerBlocks?.length,transform:t=>(0,e.createBlock)("groundworx/navigation-link",t)},{type:"block",blocks:["core/spacer"],isMatch:(e,t)=>0===t?.innerBlocks?.length,transform:()=>(0,e.createBlock)("core/spacer")},{type:"block",blocks:["core/site-logo"],isMatch:(e,t)=>0===t?.innerBlocks?.length,transform:()=>(0,e.createBlock)("core/site-logo")},{type:"block",blocks:["core/home-link"],isMatch:(e,t)=>0===t?.innerBlocks?.length,transform:()=>(0,e.createBlock)("core/home-link")},{type:"block",blocks:["core/social-links"],isMatch:(e,t)=>0===t?.innerBlocks?.length,transform:()=>(0,e.createBlock)("core/social-links")},{type:"block",blocks:["core/search"],isMatch:(e,t)=>0===t?.innerBlocks?.length,transform:()=>(0,e.createBlock)("core/search")}]},R=(0,p.jsxs)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,p.jsx)(u.Path,{d:"M15.5 7.5h-7V9h7V7.5Zm-7 3.5h7v1.5h-7V11Zm7 3.5h-7V16h7v-1.5Z"}),(0,p.jsx)(u.Path,{d:"M17 4H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2ZM7 5.5h10a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5Z"})]}),D=(0,p.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(u.Path,{d:"M2 12c0 3.6 2.4 5.5 6 5.5h.5V19l3-2.5-3-2.5v2H8c-2.5 0-4.5-1.5-4.5-4s2-4.5 4.5-4.5h3.5V6H8c-3.6 0-6 2.4-6 6zm19.5-1h-8v1.5h8V11zm0 5h-8v1.5h8V16zm0-10h-8v1.5h8V6z"})});(0,e.registerBlockType)(N.UU,{icon:({context:e})=>"list-view"===e?R:D,__experimentalLabel(e,{context:t}){const{label:n}=e,o=e?.metadata?.name;return"list-view"===t&&(o||n)&&e?.metadata?.name||n},edit:function({attributes:t,isSelected:u,setAttributes:x,mergeBlocks:w,onReplace:_,context:b,clientId:f}){const{label:v,url:y,description:j,rel:S}=t,{showSubmenuIcon:I,maxNestingLevel:T}=b,{__unstableMarkNextChangeAsNotPersistent:H,replaceBlock:N,selectBlock:M}=(0,i.useDispatch)(r.store),[R,D]=(0,d.useState)(!1),[P,E]=(0,d.useState)(null),[A,z]=(0,d.useState)(null),Z=(0,d.useRef)(null),O=(e=>{const[t,n]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{const{ownerDocument:t}=e.current;function o(e){r(e)}function l(){n(!1)}function r(t){e.current.contains(t.target)?n(!0):n(!1)}return t.addEventListener("dragstart",o),t.addEventListener("dragend",l),t.addEventListener("dragenter",r),()=>{t.removeEventListener("dragstart",o),t.removeEventListener("dragend",l),t.removeEventListener("dragenter",r)}}),[]),t})(Z),U=(0,o.__)("Add text…"),G=(0,d.useRef)(),{parentCount:F,isParentOfSelectedBlock:J,isImmediateParentOfSelectedBlock:K,hasChildren:q,selectedBlockHasChildren:Q,onlyDescendantIsEmptyLink:X}=(0,i.useSelect)((e=>{const{hasSelectedInnerBlock:t,getSelectedBlockClientId:n,getBlockParentsByBlockName:o,getBlock:l,getBlockCount:s,getBlockOrder:i}=e(r.store);let a;const c=i(n());if(1===c?.length){const e=l(c[0]);a="groundworx/navigation-link"===e?.name&&!e?.attributes?.label}return{parentCount:o(f,"groundworx/navigation-submenu").length,isParentOfSelectedBlock:t(f,!0),isImmediateParentOfSelectedBlock:t(f,!1),hasChildren:!!s(f),selectedBlockHasChildren:!!c?.length,onlyDescendantIsEmptyLink:a}}),[f]),W=(0,k.usePrevious)(q);(0,d.useEffect)((()=>{y||D(!0)}),[]),(0,d.useEffect)((()=>{u||D(!1)}),[u]),(0,d.useEffect)((()=>{R&&y&&(0,c.isURL)((0,c.prependHTTP)(v))&&/^.+\.[a-z]+/.test(v)&&function(){G.current.focus();const{ownerDocument:e}=G.current,{defaultView:t}=e,n=t.getSelection(),o=e.createRange();o.selectNodeContents(G.current),n.removeAllRanges(),n.addRange(o)}()}),[y]);const Y=(0,r.useBlockProps)({ref:(0,k.useMergeRefs)([z,Z]),className:n("gwx-menu-item","open-on-click",{"is-editing":u||J,"is-dragging-within":O,"has-link":!!y,"has-child":q}),onKeyDown:function(e){a.isKeyboardEvent.primary(e,"k")&&(e.preventDefault(),e.stopPropagation(),D(!0),E(G.current))}}),$=function(e){const{textColor:t,customTextColor:n,backgroundColor:o,customBackgroundColor:l,style:r}=e,s={};return n?s.customTextColor=n:t?s.textColor=t:r?.color?.text&&(s.customTextColor=r.color.text),l?s.customBackgroundColor=l:o?s.backgroundColor=o:r?.color?.background&&(s.customTextColor=r.color.background),s}(b),ee=F>=T?C.filter((e=>"groundworx/navigation-submenu"!==e)):C,te=function(e){return{className:n("gwx-menu-item__container",{"has-text-color":!(!e.textColor&&!e.customTextColor),"has-background":!(!e.backgroundColor&&!e.customBackgroundColor)})}}($),ne=(0,r.useInnerBlocksProps)(te,{allowedBlocks:ee,defaultBlock:B,directInsert:!0,__experimentalCaptureToolbars:!0,renderAppender:!!(u||K&&!Q)&&r.InnerBlocks.ButtonBlockAppender});function oe(){const n=(0,e.createBlock)("groundworx/navigation-link",t);N(f,n)}(0,d.useEffect)((()=>{!q&&W&&(H(),oe())}),[q,W]);const le=!Q||X;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.BlockControls,{children:(0,p.jsxs)(l.ToolbarGroup,{children:[(0,p.jsx)(l.ToolbarButton,{name:"link",icon:h,title:(0,o.__)("Link"),shortcut:a.displayShortcut.primary("k"),onClick:e=>{D(!0),E(e.currentTarget)}}),(0,p.jsx)(l.ToolbarButton,{name:"revert",icon:m,title:(0,o.__)("Convert to Link"),onClick:oe,className:"gwx-menu__submenu__revert",disabled:!le})]})}),(0,p.jsx)(r.InspectorControls,{children:(0,p.jsxs)(l.__experimentalToolsPanel,{label:(0,o.__)("Settings"),resetAll:()=>{x({label:"",url:"",description:"",rel:""})},children:[(0,p.jsx)(l.__experimentalToolsPanelItem,{label:(0,o.__)("Text"),isShownByDefault:!0,hasValue:()=>!!v,onDeselect:()=>x({label:""}),children:(0,p.jsx)(l.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:v||"",onChange:e=>{x({label:e})},label:(0,o.__)("Text"),autoComplete:"off"})}),(0,p.jsx)(l.__experimentalToolsPanelItem,{label:(0,o.__)("Link"),isShownByDefault:!0,hasValue:()=>!!y,onDeselect:()=>x({url:""}),children:(0,p.jsx)(l.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:y||"",onChange:e=>{x({url:e})},label:(0,o.__)("Link"),autoComplete:"off",type:"url"})}),(0,p.jsx)(l.__experimentalToolsPanelItem,{label:(0,o.__)("Description"),isShownByDefault:!0,hasValue:()=>!!j,onDeselect:()=>x({description:""}),children:(0,p.jsx)(l.TextareaControl,{__nextHasNoMarginBottom:!0,value:j||"",onChange:e=>{x({description:e})},label:(0,o.__)("Description"),help:(0,o.__)("The description will be displayed in the menu if the current theme supports it.")})}),(0,p.jsx)(l.__experimentalToolsPanelItem,{label:(0,o.__)("Rel attribute"),isShownByDefault:!0,hasValue:()=>!!S,onDeselect:()=>x({rel:""}),children:(0,p.jsx)(l.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:S||"",onChange:e=>{x({rel:e})},label:(0,o.__)("Rel attribute"),autoComplete:"off",help:(0,o.__)("The relationship of the linked URL as space-separated link types.")})})]})}),(0,p.jsxs)("div",{...Y,children:[(0,p.jsxs)("div",{className:"gwx-menu-item__content",children:[(0,p.jsx)(r.RichText,{ref:G,tagName:"a",identifier:"label",className:"gwx-menu-item__label",value:v,onChange:e=>x({label:e}),onMerge:w,onReplace:_,"aria-label":(0,o.__)("Navigation link text"),placeholder:U,withoutInteractiveFormatting:!0,onClick:()=>{y||(D(!0),E(G.current))}}),I&&(0,p.jsx)("span",{className:"gwx-menu-item__icon",children:(0,p.jsx)(g,{})}),j&&(0,p.jsx)("span",{className:"gwx-menu-item__description",children:j}),R&&(0,p.jsx)(V,{clientId:f,link:t,onClose:()=>{D(!1),P?(P.focus(),E(null)):M(f)},anchor:A,onRemove:()=>{x({url:""}),(0,s.speak)((0,o.__)("Link removed."),"assertive")},onChange:e=>{((e={},t,n={})=>{const{label:o="",kind:l="",type:r=""}=n,{title:s="",url:i="",opensInNewTab:a,id:d,kind:u=l,type:p=r}=e,h=s.replace(/http(s?):\/\//gi,""),m=i.replace(/http(s?):\/\//gi,""),k=s&&s!==o&&h!==m?(0,L.escapeHTML)(s):o||(0,L.escapeHTML)(m),g="post_tag"===p?"tag":p.replace("-","_"),x=["post","page","tag","category"].indexOf(g)>-1,w=!u&&!x||"custom"===u?"custom":u;t({...i&&{url:encodeURI((0,c.safeDecodeURI)(i))},...k&&{label:k},...void 0!==a&&{opensInNewTab:a},...d&&Number.isInteger(d)&&{id:d},...w&&{kind:w},...g&&"URL"!==g&&{type:g}})})(e,x,t)}})]}),(0,p.jsx)("div",{className:"gwx-menu-item__subcontent",children:(0,p.jsx)("div",{...ne})})]})]})},save:function(){return(0,p.jsx)(r.InnerBlocks.Content,{})},transforms:M})}();
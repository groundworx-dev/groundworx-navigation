import*as e from"@wordpress/interactivity";var t,n,o={d:function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},l=(t={getContext:function(){return e.getContext},getElement:function(){return e.getElement},store:function(){return e.store},withSyncEvent:function(){return e.withSyncEvent}},n={},o.d(n,t),n);const i=["a[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];let s=0;const{actions:c,state:r}=(0,l.store)("groundworx/navigation",{state:{get switchAt(){return(0,l.getContext)().switchAt},get isInitialized(){return(0,l.getContext)().isInitialized},get roleAttribute(){return"overlay"===(0,l.getContext)().type&&r.isMenuOpen?"dialog":null},get ariaModal(){return"overlay"===(0,l.getContext)().type&&r.isMenuOpen?"true":null},get ariaLabel(){const e=(0,l.getContext)();return"overlay"===e.type&&r.isMenuOpen?e.ariaLabel:null},get ariaLabelTrigger(){const e=(0,l.getContext)();return"overlay"===e.type&&r.isMenuOpen?e.ariaLabelOpened:e.ariaLabelClosed},get isMenuOpen(){return Object.values(r.menuOpenedBy).filter(Boolean).length>0},get menuOpenedBy(){const e=(0,l.getContext)();return"overlay"===e.type?e.overlayOpenedBy:e.submenuOpenedBy}},callbacks:{initMenu(){const e=(0,l.getContext)(),{ref:t}=(0,l.getElement)();if(c.checkViewport(),window.matchMedia(`(min-width: ${e.switchAt}px)`).addEventListener("change",c.checkViewport),e.isInitialized=!0,r.isMenuOpen){const n=t.querySelectorAll(i);e.modal=t,e.firstFocusableElement=n[0],e.lastFocusableElement=n[n.length-1]}},focusFirstElement(){const{ref:e}=(0,l.getElement)();if(r.isMenuOpen){const t=e.querySelectorAll(i);t?.[0]?.focus()}},scrollUpReveal(){var e;const{ref:t}=(0,l.getElement)();if(!t||!t.classList.contains("is-position-scroll-up-reveal"))return;if(!t._scrollUpRevealInit&&0===s){t._scrollUpRevealInit=!0,s++;const e=()=>{const e=t.getBoundingClientRect().height;document.body.style.setProperty("--gwx-nav-top-height",`${e}px`)};requestAnimationFrame((()=>{requestAnimationFrame(e)})),window.addEventListener("resize",e),t._scrollUpRevealThreshold=t.offsetTop+t.offsetHeight,t._scrollUpRevealPrevScrollPos=window.scrollY}const n=window.scrollY,o=n>(null!==(e=t._scrollUpRevealPrevScrollPos)&&void 0!==e?e:n),i=n<=t._scrollUpRevealThreshold;t.classList.toggle("scroll-init",n>0),t.classList.toggle("scroll-up",!o&&!i),t.classList.toggle("scroll-down",o&&!i),t._scrollUpRevealPrevScrollPos=n},measureNavBounds(){const{ref:e}=(0,l.getElement)();if(!e||e._navBoundsInit)return;const t=()=>{const e=document.body.style;e.removeProperty("--gwx-nav-top-height"),e.removeProperty("--gwx-nav-bottom-height"),e.removeProperty("--gwx-nav-left-width"),e.removeProperty("--gwx-nav-right-width")},n=()=>{const n=document.documentElement.clientWidth,o=document.documentElement.clientHeight;if(n<300)return void t();const l=e.getBoundingClientRect(),i=document.body.style;t(),Math.abs(l.top);const s=Math.abs(o-l.bottom),c=Math.abs(l.left)<=1,r=Math.abs(n-l.right)<=1;c&&r?s<=1?i.setProperty("--gwx-nav-bottom-height",`${l.height}px`):i.setProperty("--gwx-nav-top-height",`${l.height}px`):(c&&i.setProperty("--gwx-nav-left-width",`${l.width}px`),r&&i.setProperty("--gwx-nav-right-width",`${l.width}px`))};e._navBoundsInit=!0,requestAnimationFrame((()=>{requestAnimationFrame(n)})),window.addEventListener("resize",n)}},actions:{checkViewport(){const e=(0,l.getContext)();e.forceModal?e.shouldSwitchLayout=!1:e.shouldSwitchLayout=window.innerWidth>=e.switchAt,e._forceUpdate=Date.now()},openMenuOnHover(){const e=(0,l.getContext)();(0,l.getElement)().ref.closest("[data-wp-context]"),(e.shouldSwitchLayout||e.alwaysHover)&&c.openMenu("hover")},closeMenuOnHover(){const e=(0,l.getContext)();(0,l.getElement)().ref.closest("[data-wp-context]"),(e.shouldSwitchLayout||e.alwaysHover)&&c.closeMenu("hover")},toggleMenuOnClick(){const e=(0,l.getContext)(),{ref:t}=(0,l.getElement)();window.document.activeElement!==t&&t.focus();const{menuOpenedBy:n}=r;n.click||n.focus?(c.closeMenu("click"),c.closeMenu("focus")):(e.previousFocus=t,c.openMenu("click"))},openMenuOnClick(){const e=(0,l.getContext)(),{ref:t}=(0,l.getElement)();e.previousFocus=t,c.openMenu("click")},closeMenuOnClick(){c.closeMenu("click"),c.closeMenu("focus")},handleMenuFocusout(e){const t=(0,l.getContext)(),{modal:n,type:o}=t;(null===e.relatedTarget||!n?.contains(e.relatedTarget)&&e.target!==window.document.activeElement)&&(c.closeMenu("click"),c.closeMenu("focus"))},openMenu(e="click"){const{type:t,lockBody:n}=(0,l.getContext)();r.menuOpenedBy[e]=!0,"overlay"===t&&!0===n&&document.documentElement.classList.add("has-modal-open")},closeMenu(e="click"){const t=(0,l.getContext)(),{type:n,lockBody:o}=t;r.menuOpenedBy[e]=!1,r.isMenuOpen||(t.modal?.contains(document.activeElement)&&t.previousFocus?.focus(),t.modal=null,t.previousFocus=null,"overlay"===n&&!0===o&&document.documentElement.classList.remove("has-modal-open"))},handleMenuKeydown:(0,l.withSyncEvent)((e=>{const{type:t,firstFocusableElement:n,lastFocusableElement:o}=(0,l.getContext)();if(r.menuOpenedBy.click){if("Escape"===e.key)return e.stopPropagation(),c.closeMenu("click"),void c.closeMenu("focus");"overlay"===t&&"Tab"===e.key&&(e.shiftKey&&window.document.activeElement===n?(e.preventDefault(),o.focus()):e.shiftKey||window.document.activeElement!==o||(e.preventDefault(),n.focus()))}}))}},{lock:!0});